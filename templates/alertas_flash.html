{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <style>
      /* Fondo transparente */
      #flash-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      /* Caja modal */
      #flash-modal {
        background: #fff;
        padding: 15px 20px;
        border-radius: 8px;
        width: 250px;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        font-family: Arial, sans-serif;
        text-align: center;
      }

      #flash-modal button {
        margin-top: 15px;
        padding: 6px 12px;
        background: #333;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      /* Colores según categoría */
      .flash-success { color: green; }
      .flash-warning { color: orange; }
      .flash-danger  { color: red; }
      .flash-info    { color: blue; }
    </style>

    <div id="flash-overlay">
      <div id="flash-modal">
        {% for category, message in messages %}
          <p class="flash-{{ category }}">{{ message }}</p>
        {% endfor %}
        <button onclick="document.getElementById('flash-overlay').remove()">Cerrar</button>
      </div>
    </div>

    <!-- Autocierre opcional después de X segundos -->
    <script>
      setTimeout(() => {
        const overlay = document.getElementById('flash-overlay');
        if (overlay) overlay.remove();
      }, 3000); // 3 segundos
    </script>
  {% endif %}
{% endwith %}
